<!-- This file was automatically generated by the `geine`. Make all changes to `README.yaml` and run `make readme` to rebuild this file. -->

[![Clouddrove][logo]](https://clouddrove.com)

# terraform-aws-cloudfront-cdn [![Build Status](https://img.shields.io/badge/build-passing-green.svg)](https://travis-ci.org/cloudposse/terraform-aws-vpc)


Terraform Module that implements a CloudFront Web Distribution (CDN).


---

This project is part of our comprehensive ["Clouddrove"](https://clouddrove.com) approach towards DevOps. 
[<img align="right" title="Share on Facebook" src="https://docs.cloudposse.com/images/ionicons/social-facebook-outline-2.0.1-16x16-999999.svg" />][share_facebook]
[<img align="right" title="Share on LinkedIn" src="https://docs.cloudposse.com/images/ionicons/social-linkedin-outline-2.0.1-16x16-999999.svg" />][share_linkedin]
[<img align="right" title="Share on Twitter" src="https://docs.cloudposse.com/images/ionicons/social-twitter-outline-2.0.1-16x16-999999.svg" />][share_twitter]





It's 100% Open Source and licensed under the [MIT](LICENSE).









## Usage



Include this repository as a module in your existing terraform code:
### Example1
```hcl
      module "s3_bucket" {
        source         = "git::https://github.com/clouddrove/terraform-aws-s3.git"

        name           = "secure-bucket-cdn"
        region         = "us-east-1"
        application    = "clouddrove"
        environment    = "test"
        label_order    = ["environment", "name", "application"]

        versioning     = true
        acl            = "private"
        bucket_enabled = true
      }

      module "acm" {
        source               = "git::https://github.com/clouddrove/terraform-aws-acm.git"

        name                 = "certificate"
        application          = "clouddrove"
        environment          = "test"
        label_order          = ["environment", "name", "application"]

        domain_name          = "clouddrove.com"
        validation_method    = "EMAIL"
        validate_certificate = false
      }

      module "cdn" {
        source = "git::https://github.com/clouddrove/terraform-aws-cloudfront-cdn.git"

        name        = "basic-cdn"
        application = "clouddrove"
        label_order = ["environment", "name", "application"]

        environment            = "test"
        aliases                = ["clouddrove.com"]
        bucket_name            = module.s3_bucket.s3_default_id[0]
        viewer_protocol_policy = "redirect-to-https"
        compress               = "false"
        allowed_methods        = ["GET", "HEAD"]
        acm_certificate_arn    = module.acm.arn[0]
      }

```

### Example2
```hcl
      module "s3_bucket" {
        source         = "git::https://github.com/clouddrove/terraform-aws-s3.git"

        name           = "secure-bucket-cdn"
        region         = "us-east-1"
        application    = "clouddrove"
        environment    = "test"
        label_order    = ["environment", "name", "application"]

        versioning     = true
        acl            = "private"
        bucket_enabled = true
      }

      module "acm" {
        source               = "git::https://github.com/clouddrove/terraform-aws-acm.git"
        name                 = "certificate"
        application          = "clouddrove"
        environment          = "test"
        label_order          = ["environment", "name", "application"]

        domain_name          = "clouddrove.com"
        validation_method    = "EMAIL"
        validate_certificate = false
      }

      module "cdn" {
        source = "git::https://github.com/clouddrove/terraform-aws-cloudfront-cdn.git"

        name        = "basic-cdn"
        application = "clouddrove"
        environment = "test"
        label_order = ["environment", "name", "application"]

        aliases                = ["clouddrove.com"]
        bucket_name            = module.s3_bucket.s3_default_id[0]
        viewer_protocol_policy = "redirect-to-https"
        compress               = "false"
        allowed_methods        = ["GET", "HEAD"]
        acm_certificate_arn    = module.acm.arn[0]
        trusted_signers        = ["self"]
        public_key_enable      = "true"
        public_key             = "./../cdn.pem"
      }

```






## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|:----:|:-----:|:-----:|
| acm_certificate_arn | Existing ACM Certificate ARN | string | `` | no |
| aliases | List of FQDN's - Used to set the Alternate Domain Names (CNAMEs) setting on Cloudfront | list(string) | `<list>` | no |
| allowed_methods | List of allowed methods (e.g. GET, PUT, POST, DELETE, HEAD) for AWS CloudFront | list(string) | `<list>` | no |
| application | Application (e.g. `cp` or `clouddrove`) | string | - | yes |
| attributes | Additional attributes (e.g. `1`) | list(string) | `<list>` | no |
| bucket_name | A unique identifier for the origin | string | `` | no |
| cached_methods | List of cached methods (e.g. GET, PUT, POST, DELETE, HEAD) | list(string) | `<list>` | no |
| comment | Comment for the origin access identity | string | `Managed by Clouddrove` | no |
| compress | Compress content for web requests that include Accept-Encoding: gzip in the request header | string | `` | no |
| custom_domain | If cdn create with custom Domain | string | `false` | no |
| default_root_object | Object that CloudFront return when requests the root URL | string | `index.html` | no |
| default_ttl | Default amount of time (in seconds) that an object is in a CloudFront cache | string | `60` | no |
| domain_name | (Required) - The DNS domain name of your custom origin (e.g. clouddrove.com) | string | `` | no |
| enabled | Select Enabled if you want CloudFront to begin processing requests as soon as the distribution is created, or select Disabled if you do not want CloudFront to begin processing requests after the distribution is created | string | `true` | no |
| enabled_bucket | If cdn create with s3 bucket | string | `false` | no |
| environment | Environment (e.g. `prod`, `dev`, `staging`) | string | - | yes |
| error_code | List of forwarded cookie names | string | `404` | no |
| forward_cookies | Time in seconds that browser can cache the response for S3 bucket | string | `none` | no |
| forward_cookies_whitelisted_names | List of forwarded cookie names | list | `<list>` | no |
| forward_header_values | A list of whitelisted header values to forward to the origin | list(string) | `<list>` | no |
| forward_query_string | Forward query strings to the origin that is associated with this cache behavior | string | `false` | no |
| geo_restriction_locations | List of country codes for which  CloudFront either to distribute content (whitelist) or not distribute your content (blacklist) | list(string) | `<list>` | no |
| geo_restriction_type | Method that use to restrict distribution of your content by country: `none`, `whitelist`, or `blacklist` | string | `none` | no |
| http_version | (Optional) - The maximum HTTP version to support on the distribution. Allowed values are http1.1 and http2. The default is http2 | string | `http2` | no |
| is_ipv6_enabled | State of CloudFront IPv6 | string | `true` | no |
| label_order | label order, e.g. `name`,`application` | list | `<list>` | no |
| max_ttl | Maximum amount of time (in seconds) that an object is in a CloudFront cache | string | `31536000` | no |
| min_ttl | Minimum amount of time that you want objects to stay in CloudFront caches | string | `0` | no |
| minimum_protocol_version | Cloudfront TLS minimum protocol version | string | `TLSv1` | no |
| name | Name  (e.g. `app` or `cluster`) | string | - | yes |
| origin_force_destroy | Delete all objects from the bucket  so that the bucket can be destroyed without error (e.g. `true` or `false`) | string | `false` | no |
| origin_http_port | (Required) - The HTTP port the custom origin listens on | string | `80` | no |
| origin_https_port | (Required) - The HTTPS port the custom origin listens on | string | `443` | no |
| origin_keepalive_timeout | (Optional) The Custom KeepAlive timeout, in seconds. By default, AWS enforces a limit of 60. But you can request an increase. | string | `60` | no |
| origin_path | An optional element that causes CloudFront to request your content from a directory in your Amazon S3 bucket or your custom origin. It must begin with a /. Do not add a / at the end of the path. | string | `` | no |
| origin_protocol_policy | (Required) - The origin protocol policy to apply to your origin. One of http-only, https-only, or match-viewer | string | `match-viewer` | no |
| origin_read_timeout | (Optional) The Custom Read timeout, in seconds. By default, AWS enforces a limit of 60. But you can request an increase. | string | `60` | no |
| origin_ssl_protocols | (Required) - The SSL/TLS protocols that you want CloudFront to use when communicating with your origin over HTTPS | list | `<list>` | no |
| price_class | Price class for this distribution: `PriceClass_All`, `PriceClass_200`, `PriceClass_100` | string | `PriceClass_100` | no |
| public_key | he encoded public key that you want to add to CloudFront to use with features like field-level encryption | string | `` | no |
| public_key_enable | Public key enable or disable | string | `false` | no |
| response_page_path | The path of the custom error page (for example, /custom_404.html) | string | `` | no |
| smooth_streaming | (Optional) - Indicates whether you want to distribute media files in Microsoft Smooth Streaming format using the origin that is associated with this cache behavior | string | `false` | no |
| ssl_support_method | Specifies how you want CloudFront to serve HTTPS requests. One of `vip` or `sni-only` | string | `sni-only` | no |
| tags | Additional tags (e.g. map(`BusinessUnit`,`XYZ`) | map(string) | `<map>` | no |
| trusted_signers | (Optional) - The AWS accounts, if any, that you want to allow to create signed URLs for private content. | list(string) | `<list>` | no |
| viewer_protocol_policy | allow-all, redirect-to-https | string | `` | no |
| web_acl_id | (Optional) - Web ACL ID that can be attached to the Cloudfront distribution | string | `` | no |

## Outputs

| Name | Description |
|------|-------------|
| access_identity_etag | ID of AWS CloudFront distribution |
| access_identity_id | ID of AWS CloudFront distribution |
| arn | The ARN (Amazon Resource Name) for the distribution. For example |
| domain_name | The domain name corresponding to the distribution. For example |
| etag | The current version of the distribution's information. For example |
| hosted_zone_id | The CloudFront Route 53 zone ID that can be used to route an Alias Resource Record Set to |
| id | The identifier for the distribution. For example |
| pubkey_etag | Current version of the distribution's information |
| pubkey_id | ID of AWS CloudFront distribution |
| status | The current status of the distribution |




## Share the Love 

Like this project? Please give it a ★ on [our GitHub](https://github.com/clouddrove/terraform-aws-cloudfront-cdn)! (it helps us **a lot**) 

## Related Projects

Check out these related projects.

- [terraform-aws-s3](https://github.com/clouddrove/terraform-aws-s3) - Terraform module to creates a s3 bucket with support of versioning, encryption, ACL.



## Help

**Got a question?**

File a GitHub [issue](https://github.com/clouddrove/terraform-aws-cloudfront-cdn/issues), send us an [email][email].

## Contributing

### Bug Reports & Feature Requests

Please use the [issue tracker](https://github.com/clouddrove/terraform-aws-cloudfront-cdn/issues) to report any bugs or file feature requests.


## Copyright

Copyright © [CloudDrove](https://clouddrove.com). All Right Reserved.




## License 

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

MIT License

Copyright (c) 2019 Cloud Drove

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

Source: <https://opensource.org/licenses/MIT>


## About

[![Clouddrove][logo]][website]

We're a DevOps Professional Services company based in München, Germany. We ❤️  [Open Source Software][we_love_open_source].

Check out [our other projects][github], [follow us on twitter][twitter] to help with your cloud strategy and implementation.



### Contributors

|  [![Kamlesh Bhargav][kamleshbhargav_avatar]][kamleshbhargav_homepage]<br/>[Kamlesh Bhargav][kamleshbhargav_homepage] | [![Nikita Dugar][nikitadugar_avatar]][nikitadugar_homepage]<br/>[Nikita Dugar][nikitadugar_homepage] | [![Sohan Yadav][sohanyadav_avatar]][sohanyadav_homepage]<br/>[Sohan Yadav][sohanyadav_homepage] |
|---|---|---|

  [kamleshbhargav_homepage]: https://github.com/kamleshbhargav
  [kamleshbhargav_avatar]: https://github.com/kamleshbhargav.png?size=150
  [nikitadugar_homepage]: https://github.com/nikitadugar
  [nikitadugar_avatar]: https://github.com/nikitadugar.png?size=150
  [sohanyadav_homepage]: https://github.com/sohanyadav
  [sohanyadav_avatar]: https://github.com/sohanyadav.png?size=150



  [logo]: https://clouddrove.com/media/images/logo.png
  [website]: https://clouddrove.com
  [github]: https://github.com/clouddrove
  [linkedin]: https://cpco.io/linkedin
  [twitter]: https://twitter.com/clouddrove/
  [email]: https://clouddrove.com/contact-us.html
  [we_love_open_source]: https://github.com/clouddrove
  [terraform_modules]: https://github.com/clouddrove?utf8=%E2%9C%93&q=terraform-&type=&language=
  [share_twitter]: https://twitter.com/intent/tweet/?text=terraform-aws-cloudfront-cdn&url=https://github.com/clouddrove/terraform-aws-cloudfront-cdn
  [share_linkedin]: https://www.linkedin.com/shareArticle?mini=true&title=terraform-aws-cloudfront-cdn&url=https://github.com/clouddrove/terraform-aws-cloudfront-cdn
  [share_facebook]: https://facebook.com/sharer/sharer.php?u=https://github.com/clouddrove/terraform-aws-cloudfront-cdn
